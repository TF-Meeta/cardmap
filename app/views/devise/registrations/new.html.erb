<h1>新規登録</h1>

<%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
  <% if resource.errors.any? %>
    <div class="error-messages">
      <ul>
        <% resource.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%# --- 入力項目共通レイアウト --- %>
  <% [:name, :email, :password, :password_confirmation].each do |attr| %>
    <div class="form-group">
      <div class="form-text-wrap">
        <% label_text = case attr
                        when :name then "ユーザーネーム"
                        when :email then "メールアドレス"
                        when :password then "パスワード"
                        when :password_confirmation then "パスワード確認"
                        end %>
        <%= f.label attr, label_text, class: "form-text" %>
        <span class="indispensable">必須</span>
      </div>

      <%# フィールドタイプを分岐 %>
      <% if attr == :password || attr == :password_confirmation %>
        <%= f.password_field attr, autocomplete: (attr == :password ? "new-password" : "new-password"),
                             placeholder: (attr == :password ? "6文字以上" : "もう一度入力"),
                             class: "form-control" %>
      <% elsif attr == :email %>
        <%= f.email_field attr, autocomplete: "email", placeholder: "example@example.com",
                          class: "form-control" %>
      <% else %>
        <%= f.text_field attr, autofocus: (attr == :name), placeholder: "例: Takahiro",
                         class: "form-control" %>
      <% end %>
    </div>
  <% end %>

  <%= f.submit "登録する", class: "btn" %>
<% end %>

<%= render "devise/shared/links" %>
